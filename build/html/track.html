

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>} &mdash; trustos master documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="}" href="token.html" />
    <link rel="prev" title="&lt;no title&gt;" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> trustos
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br>
<a style="width:100%;" href="index.html">
    <h1 style="color: white; font-size:220%; margin-bottom:2px;">TrustOS</h1>
</a>
<img style="background:none; margin: auto;  width:30%; height:95%;" alt="Telefónica"
    src="_static/images/telefonica_white.png" />

<!-- 
<a href="https://github.com/hyperledger/fabric"></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a> -->


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id16">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id21">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id37">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id42">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id47">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id52">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id57">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id62">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id67">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id72">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id77">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id82">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id87">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id92">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id28">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id75">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id86">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id97">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="token.html#id108">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settle.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id10">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id15">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id25">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id30">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id35">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id40">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id45">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id50">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id55">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id60">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id65">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id70">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id75">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id80">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id91">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id96">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id101">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id106">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id111">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id116">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="cert.html#id121">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html">Example:</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id1">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id2">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id3">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id6">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id9">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id14">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id17">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id23">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id26">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id29">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id32">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id35">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id38">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id45">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id48">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id51">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id54">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id57">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id60">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id63">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="id.html#id66">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html#id10">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html#id15">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html#id25">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html#id30">}</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trustos</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>}</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/track.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Track</p>
<p>Track API is used to create, manage, and follow life cycle of <strong>digital assets</strong> on the blockchain. An asset is a digital representation of a real asset in the physical world. Through this API tracking the whole state changes of every asset can be implemented in an easy way, taking advantage of the inherit benefits from blockchain.</p>
<p>## API Specification</p>
<p>An abstraction API with all the asset functionalities
### Asset
An asset is a digital representation of a real asset in the physical world. An asset records every single state or data change (f.e. the update of metadata, the transfer of ownership, etc.) This allow us to track the whole transactions since its creation in an inmutable and transparent way.</p>
<p>Every asset has the following structure:</p>
<ul class="simple">
<li><p><cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset</p></li>
<li><p><cite>data</cite>    :  <cite>&lt;json&gt;</cite>   JSON of <strong>inmutable</strong> data. It can have as many field as required</p></li>
<li><p><cite>metadata</cite>:  <cite>&lt;json&gt;</cite>   JSON of <strong>mutable</strong> data. It can have as many field as required</p></li>
<li><p><cite>userOwner</cite>:  <cite>&lt;string&gt;</cite> Owner of the asset</p></li>
<li><p><cite>datetime</cite> :  <cite>&lt;string&gt;</cite> UNIX date of creation</p></li>
<li><p><cite>hftxid</cite> :  <cite>&lt;string&gt;</cite> Current asset transaction in Hyperledger Fabric</p></li>
<li><p><cite>trustpoint</cite> : <cite>&lt;json&gt;</cite> JSON of data related to trustpoints. It can include the fields: EthereumContractAddres, LastEthTxId and LastHfTxId.</p></li>
<li><p><cite>hash</cite> :  <cite>&lt;string&gt;</cite> Hash of the asset</p></li>
</ul>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>js
{</p>
<blockquote>
<div><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “red”
“position”: { “x”: “53”, “y”: “22”}</p>
</div></blockquote>
<p>},
“userOwner”: “test:telefonicaMSP”
“datetime”: 1558009289,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d05”,
“trustpoint”: {</p>
<blockquote>
<div><p>“ethereumContractAddress”: “0xeE83b6D6dc84fa0c91A6f99931f6CF29F6B7ea3b”,
“lastEthTxId”:”0x6d9f4bb3fb67cc451758097c928777aa8adccb6c8a6e59c2c5bc9360208cc8b49”</p>
</div></blockquote>
<p>},
“hash”: “oCZygxQBp5HBVm+SSUCCrgJfV3+CeghOzV9m+UxDsY8=”,</p>
</div></blockquote>
<p>}</p>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a>`
&lt;/details&gt;
&lt;br&gt;</p>
<p>## API Methods</p>
<p>![TrackAPI methods](./images/track_swagger.png)</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt; Asset methods&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p>—</p>
<p>####     POST -  <cite>/asset/create</cite>
Ceate a digital asset on a Blockchain.</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset
- <cite>data</cite>    :  <cite>&lt;json&gt;</cite> JSON of <strong>inmutable</strong> data. It can have as many field as required
- <cite>metadata</cite>:  <cite>&lt;json&gt;</cite> JSON of <strong>mutable</strong> data. It can have as many field as required</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">`</span></a>js
{</p>
<blockquote>
<div><p>“assetid”: “”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“metadata” : {</p>
<blockquote>
<div><p>“color”: “red”,
“position”: { “x”: 23.34, “y”: -24.22}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<div class="section" id="id11">
<h1>}<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id12"><span class="problematic" id="id13">``</span></a><a href="#id14"><span class="problematic" id="id15">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “oCZygxQBp5HBVm+SSUCCrgJfV3+CeghOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d05”,
“trustpoint”: {},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “red”,
“position”: { “x”: 23.34, “y”: -24.22}</p>
</div></blockquote>
<p>}
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id16">
<h1>}<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####    GET     -   <cite>/asset/{assetId}</cite></p>
<p>Get asset from the blockchain identified by assetId</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “oCZygxQBp5HBVm+SSUCCrgJfV3+CeghOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d05”,
“trustpoint”: {},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “red”,
“position”: { “x”: 23.34, “y”: -24.22}</p>
</div></blockquote>
<p>}
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id21">
<h1>}<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####   GET  -     <cite>/asset/{assetId}/transactions</cite></p>
<p>Get all transactions for the whole lifecycle of the asset</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>args</cite>    :  <cite>&lt;string&gt;</cite> A list of all transactions</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id22"><span class="problematic" id="id23">``</span></a><a href="#id24"><span class="problematic" id="id25">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: [</dt><dd><dl>
<dt>{</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “zCZygxQBp5HBVm+SSUCCrgJfV3+CegaOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d06”,
“trustpoint”: {},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “blue”,
“position”: { “x”: 98.35, “y”: -12.32}</p>
</div></blockquote>
<p>},
“userOwner”: “test:org1MSP”
},</p>
</dd>
</dl>
<dl>
<dt>{</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “oCZygxQBp5HBVm+SSUCCrgJfV3+CeghOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d05”,
“trustpoint”: {},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “red”,
“position”: { “x”: 23.34, “y”: -24.22}</p>
</div></blockquote>
<p>}
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>]</p>
</div></blockquote>
<p>}</p>
<p><a href="#id26"><span class="problematic" id="id27">``</span></a>`
&lt;/details&gt;</p>
<p>—</p>
<p>####   POST     - <cite>/asset/{assetId}/transfer</cite></p>
<p>Transfer the ownership of the asset. The user has to be the owner of the asset.</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset
- <cite>destinationId</cite> :  <cite>&lt;string&gt;</cite> The destination owner</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id28"><span class="problematic" id="id29">``</span></a><a href="#id30"><span class="problematic" id="id31">`</span></a>js
{</p>
<blockquote>
<div><p>“destinationId”: “bteam”,</p>
</div></blockquote>
</div>
<div class="section" id="id32">
<h1>}<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “oCZygxQBp5HBVm+SSUCCrgJfV3+CeghOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d05”,
“trustpoint”:{},
“userOwner”: “bteam”</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id37">
<h1>}<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####  POST    <cite>/asset/{assetId}/update</cite></p>
<p>Updates the <strong>mutable</strong> (“metadata”) of an asset</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;</p>
<ul class="simple">
<li><p><cite>assetid</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset</p></li>
<li><p><cite>metadata</cite>:  <cite>&lt;json&gt;</cite> JSON of <strong>mutable</strong> data. It can have as many field as required</p></li>
</ul>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id40"><span class="problematic" id="id41">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“metadata”: {</dt><dd><p>“color”: “blue”,
“position”: { “x”: 98.35, “y”: -12.32}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id42">
<h1>}<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id43"><span class="problematic" id="id44">``</span></a><a href="#id45"><span class="problematic" id="id46">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><dl>
<dt>{</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559820650,
“hash”: “zCZygxQBp5HBVm+SSUCCrgJfV3+CegaOzV9m+UxDsY8=”,
“hftxid”: “d249f267fd2dd58b6bff9d6780d31f3a04ab3a8c5b340b39ab48aed8fac55d06”,
“trustpoint”: {},
“metadata”: {</p>
<blockquote>
<div><p>“color”: “blue”,
“position”: { “x”: 98.35, “y”: -12.32}</p>
</div></blockquote>
<p>},
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id47">
<h1>}<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####   POST     - <cite>/asset/{assetId}/authorise</cite></p>
<p>Authorise user access for an asset. Only the asset owner can do this.</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetId</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset
- <cite>userId</cite> :  <cite>&lt;string&gt;</cite> The authorised user</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id48"><span class="problematic" id="id49">``</span></a><a href="#id50"><span class="problematic" id="id51">`</span></a>js
{</p>
<blockquote>
<div><p>“userId”: “did:bteam”</p>
</div></blockquote>
</div>
<div class="section" id="id52">
<h1>}<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“message”: “Successfully authorised user did:bteam for asset XXXXX”,</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id57">
<h1>}<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####   POST     - <cite>/asset/{assetId}/unauthorise</cite></p>
<p>Unauthorise user access for an asset. Only the asset owner can do this.</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetId</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset
- <cite>userId</cite> :  <cite>&lt;string&gt;</cite> The unauthorised user</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a>js
{</p>
<blockquote>
<div><p>“userId”: “did:bteam”</p>
</div></blockquote>
</div>
<div class="section" id="id62">
<h1>}<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: {</dt><dd><p>“message”: “Successfully unauthorised user did:bteam for asset XXXXX”,</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id67">
<h1>}<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>####   POST     - <cite>/asset/{assetId}/rules</cite></p>
<p>Add rules to monitor asset parameters.</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;
- <cite>assetId</cite> :  <cite>&lt;string&gt;</cite> Unique identifier of the asset
- <cite>rules</cite>:  <cite>&lt;json&gt;</cite> JSON of rules. It can have at least two fields: value &amp; range, to specify a constant value or range of values that has to accomplish a parameter. Every rule (value, range) can contain as many conditions for different parameters as necessary. However it’s noted that a use of quite many conditions affects the performance of the asset udpates.</p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id68"><span class="problematic" id="id69">``</span></a><a href="#id70"><span class="problematic" id="id71">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“rules”: {</dt><dd><dl>
<dt>“value”: [</dt><dd><dl class="simple">
<dt>{</dt><dd><p>“param”: “a”,
“value”: “b”</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“param”: “aa”,
“value”: “bb”</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>],
“range”: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>“param”: “b”,
“min”: 0,
“max”: 100</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id72">
<h1>}<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>rules</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id73"><span class="problematic" id="id74">``</span></a><a href="#id75"><span class="problematic" id="id76">`</span></a>js
{
{</p>
<blockquote>
<div><dl>
<dt>“rules”: {</dt><dd><dl>
<dt>“value”: [</dt><dd><dl class="simple">
<dt>{</dt><dd><p>“param”: “a”,
“value”: “b”</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“param”: “aa”,
“value”: “bb”</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>],
“range”: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>“param”: “b”,
“min”: 0,
“max”: 100</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id77">
<h1>}<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—</p>
<p>#### GET   -    <cite>/assets</cite></p>
<p>Lists all the assets of a user</p>
<p>&lt;u&gt;*Input*&lt;/u&gt;</p>
<p>N/A. It returns all the assets which belong to the login user</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>assetList</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id78"><span class="problematic" id="id79">``</span></a><a href="#id80"><span class="problematic" id="id81">`</span></a>js
{</p>
<blockquote>
<div><dl class="simple">
<dt>“output”: [</dt><dd><p>“exampleAsset1”,
“exampleAsset2”,
“exampleAsset3”</p>
</dd>
</dl>
<p>]</p>
</div></blockquote>
</div>
<div class="section" id="id82">
<h1>}<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>—
#### (*) authorised assets
If we deep into the technical part, it’s important to be aware that every user has two types of assets: owned assets and authorised assets. These last ones, the <cite>authorised assets or foreign assets</cite> as we like to say, are assets created by other users that have granted you access allowing you to consult and update it.</p>
<p>To interact with authorised or foreign assets, only it is necessary to put the <cite>isForeign</cite> flag to <cite>true</cite> as a query parameter in the URL (<cite>…?isForeign=true</cite>) as it is shown in the examples below:</p>
<blockquote>
<div><p>GET  -     <cite>/asset/{assetId}?isForeign=true</cite>
GET  -     <cite>/asset/{assetId}/transactions?isForeign=true</cite>
GET  -     <cite>/asset/{assetId}/transactions/range?isForeign=true</cite>
GET  -     <cite>/assets</cite>
POST -     <cite>/asset/{assetId}/update?isForeign=true</cite></p>
</div></blockquote>
<p>#### (*) trustpoint parameter
The <cite>trustpoint</cite> parameter is only filled in after the creation/registration of a trust point. Thus every new trust point regarding to an asset results in a new transaction in the asset with only the update of this <cite>trustpoint</cite> parameter.</p>
<p>Transaction after creating a trustpoint in HF:</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id83"><span class="problematic" id="id84">``</span></a><a href="#id85"><span class="problematic" id="id86">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><dl>
<dt>{</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559844444,
“hash”: “xfPsajse3rSSUCCrgJfV3+CegaOzV9m+ajso8sY=”,
“hftxid”: “ac5f9d658b6bfaed8fd2dd40b39ab485d06780d31f3ad249f26704ab3a8c5b3f”,
“trustpoint”: {</p>
<blockquote>
<div><p>“lastHfTxId”:”dd40bdb76c439afd2bfaed6ad25b3ff5d0b80d315883a8984af3670bac549f2”</p>
</div></blockquote>
<p>},
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id87">
<h1>}<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>Transaction after registering a trustpoint in Ethereum:</p>
<p>&lt;u&gt;*Output*&lt;/u&gt;
- <cite>asset</cite>    :  <cite>&lt;json&gt;</cite></p>
<dl class="simple">
<dt>&lt;details&gt;</dt><dd><p>&lt;summary&gt;&lt;em&gt;&lt;strong&gt;Sample structure&lt;/strong&gt;&lt;/em&gt; (Click to expand)&lt;/summary&gt;</p>
</dd>
</dl>
<p><a href="#id88"><span class="problematic" id="id89">``</span></a><a href="#id90"><span class="problematic" id="id91">`</span></a>js
{</p>
<blockquote>
<div><dl>
<dt>“output”: {</dt><dd><dl>
<dt>{</dt><dd><p>“assetid”: “exampleAsset”,
“data”: {</p>
<blockquote>
<div><p>“id”:”A2839RP”,
“version”:”1”</p>
</div></blockquote>
<p>},
“datetime”: 1559846666,
“hash”: “coAji3op2+SSUCCrgJfV3+CegaOzV9m+sodjPOI81=”,
“hftxid”: “5aed880ddea2kf38d06b6bfd38ac2431f3aabab3adf9d6740b3fd2d9648fac55”,
“trustpoint”: {</p>
<blockquote>
<div><p>“ethereumContractAddress”: “0xeE83b6D6dc84fa0c91A6f99931f6CF29F6B7ea3b”,
“lastEthTxId”:”0x6d9f4bb3fb67cc451758097c928777aa8adccb6c8a6e59c2c5bc9360208cc8b49”</p>
</div></blockquote>
<p>},
“userOwner”: “test:org1MSP”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id92">
<h1>}<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h1>
<p>&lt;/details&gt;</p>
<p>&lt;/details&gt;
&lt;br&gt;</p>
<p>## Architecture of the project
The project is based on the open-source programming language: Golang. An abstraction of its skeleton is depicted in the diagram below.</p>
<p><a href="#id93"><span class="problematic" id="id94">``</span></a>`
coren-trackapi
├── api</p>
<blockquote>
<div><p>├── handler           // HTTP logic
├── model             // models used by the application
├── service           // Usecases logic
├── util              // Tools used by the application</p>
<blockquote>
<div><p>├── log           // Logger tool
├── http          // Http util
└── Config        // Tool to load the configuration from yaml files</p>
</div></blockquote>
<p>└── app.go            // Router application</p>
</div></blockquote>
<dl class="simple">
<dt>├── config</dt><dd><p>└── config.yaml       // Config file</p>
</dd>
<dt>├── docs</dt><dd><p>└── docs.go           // Swagger doc file</p>
</dd>
<dt>├── postman                 // Postman collection and environment to test the API</dt><dd><p>├── collection
└── environment</p>
</dd>
</dl>
<p>├── docker-compose.yaml     // Instructions to build docker container
├── Dockerfile              // Instructions to build docker image
├── init.sh                 // Script with global environment variables
└── main.go                 // Main app</p>
<blockquote>
<div><p><a href="#id95"><span class="problematic" id="id96">``</span></a><a href="#id97"><span class="problematic" id="id98">`</span></a></p>
</div></blockquote>
<p>## How we run the application
As you could see in the [Architecture](architecture.html) module, all the applications are running on cloud. Through Kubernetes orchestration system the application deployment, scaling and management is an easy and automated task.</p>
<p>## Testing the Application
In postman folder there are the collection and environment to interact and test with the API methods. It is only needed to import them into postman application and know to use the coren-trackapi module</p>
<p>Also you can download the files in the links below:</p>
<p>&lt;a href=”_static/trackapi.collection.json” download&gt; - Postman collection&lt;/a&gt;
&lt;br&gt;
&lt;a href=”_static/environment.json” download&gt; - Postman environment&lt;/a&gt;</p>
<p>## Errors management</p>
<blockquote>
<div><p>Track API errors are managed through the following nomenclature <strong>TRACK-XX</strong> which corresponds to:&lt;br&gt;</p>
</div></blockquote>
<p>&lt;style type=”text/css”&gt;
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
.tg .tg-0lax{text-align:left;vertical-align:top}
&lt;/style&gt;
&lt;table class=”tg”&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>&lt;tr&gt;</dt><dd><p>&lt;th class=”tg-0pky”&gt;Code&lt;/th&gt;
&lt;th class=”tg-0pky”&gt;Description&lt;/th&gt;</p>
</dd>
</dl>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0pky”&gt;TRACK-00&lt;/td&gt;
&lt;td class=”tg-0pky”&gt;Service is down&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0pky”&gt;TRACK-01&lt;/td&gt;
&lt;td class=”tg-0pky”&gt;Error parsing any data structure&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;
&lt;tr&gt;</p>
<blockquote>
<div><p>&lt;td class=”tg-0lax”&gt;TRACK-02&lt;/td&gt;
&lt;td class=”tg-0lax”&gt;Error of some kind of functionality&lt;/td&gt;</p>
</div></blockquote>
<p>&lt;/tr&gt;</p>
</div></blockquote>
<p>&lt;/table&gt;</p>
<p>&lt;br&gt;</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="token.html" class="btn btn-neutral float-right" title="}" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <!-- <div role="contentinfo">
    <p>
        &copy; Copyright Telefónica 2020.

    </p>
  </div> -->
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>